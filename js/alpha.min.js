/*!
 * SkiCycleRun v4.0.0-alpha (https://skicyclerun.com)
 * Copyright 2018 - SkiCycleRun2019 Feo ElGato
 * Licensed under MIT repository git+https://github.com/timothyhalley/skicyclerun.git
 */
async function selectMap(e){console.log("MAP 2B--\x3e",e);var t=e.substring(e.lastIndexOf("/")+1).trim();console.log("DEGUG: IMAGE in SelectMAP: [",t,"]");var o=e.substr(0,e.lastIndexOf("/")),a=o.substring(o.lastIndexOf("/")+1).trim();console.log("MAP 2--\x3e",a," -- ",t);const s=await getPhotoTags(a,t);console.log("GPS Info: ",s.GPSLatitude," ",s.GPSLongitude);const i=parseFloat(s.GPSLatitude),n=parseFloat(s.GPSLongitude);new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:i,lng:n},mapTypeId:google.maps.MapTypeId.TERRAIN})}async function getPhotoTags(e,t){try{console.log("DEBUG - getPhotoTags: IMAGE = [",t,"]");let o="https://api.skicyclerun.com/deadpool/getPhotoTags/pub/"+e+"/"+t;console.log("DEBUG - getPhotoTags: [",o,"]");let a=await fetch(o,{cache:"no-cache"});return await a.json()}catch(e){console.log("ERROR: ",e)}}$(".grid").masonry({itemSelector:".grid-item",columnWidth:".grid-sizer",percentPosition:!0}),$(".grid-item").click(function(e){if($(this).hasClass("item-opened"))$(".grid").css("overflow","hidden"),$("html, body").animate({scrollTop:$("#map").offset().top},1200),console.log("MAP 2A--\x3e",$(this).css("background-image")),selectMap($(this).css("background-image"));else{console.log("MAP --\x3e",$(this).css("background-image"));$(this).outerWidth();var t=this.getBoundingClientRect();$(this).attr("data-coord-left",$(this).css("left")),$(this).attr("data-coord-top",$(this).css("top")),$(this).css({top:t.top,left:t.left}).delay(400).css({top:"120px",left:"10%",zIndex:"99999"}).addClass("item-opened"),$(".grid-alpha").fadeIn(),$("html, body").animate({scrollTop:$(".grid").offset().top},650),$(".grid").css("overflow","visible");$(".item-open").height;$(".map-alpha").delay(600).css({top:"0px",left:"0%",height:"100vw",zIndex:"99998"}).addClass("item-opened"),$(".map-alpha").css({"background-image":"linear-gradient(rgba(0, 0, 255, 0.5), rgba(255, 255, 0, 0.5)"}),$(".map-alpha").fadeIn()}}),$(document).on("click",function(e){$(".item-opened").length>0&&($(e.target).closest(".grid-item").length||$(e.target).hasClass("item-opened")||($(".grid-alpha").fadeOut(650),$(".item-opened").css({top:$(".item-opened").data("coord-top"),left:$(".item-opened").data("coord-left"),marginLeft:""}),$("html, body").animate({scrollTop:$(".grid").offset().top+parseFloat($(".item-opened").data("coord-top"))-30},650),setTimeout(function(){$(".grid-item").css("z-index","").removeClass("item-opened")},350),$(".grid").css("overflow","hidden"),$(".map-alpha").fadeOut(650),setTimeout(function(){$(".map-alpha").css("z-index","").removeClass("item-opened")},350)))});const mapData=()=>fetch("https://api.skicyclerun.com/deadpool/getMapData/halleyFamily/scan8",{cache:"no-cache"}).then(e=>e.json());